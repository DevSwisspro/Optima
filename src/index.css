@tailwind base;
@tailwind components;
@tailwind utilities;

/* ====== DESIGN SYSTEM PREMIUM VARIABLES ====== */
:root {
  /* Couleurs signature Optima */
  --optima-red-primary: #E53935;
  --optima-red-dark: #C62828;
  --optima-red-darker: #B71C1C;
  --optima-red-light: #EF5350;

  /* Palette sombre élégante */
  --dark-bg-primary: #0A0A0C;
  --dark-bg-secondary: #12121A;
  --dark-bg-tertiary: #1A1A24;
  --dark-bg-elevated: #1E1E2E;

  /* Surfaces glassmorphism */
  --glass-surface-1: rgba(26, 26, 30, 0.85);
  --glass-surface-2: rgba(30, 30, 38, 0.90);
  --glass-surface-3: rgba(35, 35, 45, 0.95);

  /* Bordures et dividers */
  --border-subtle: rgba(255, 255, 255, 0.06);
  --border-medium: rgba(255, 255, 255, 0.10);
  --border-strong: rgba(255, 255, 255, 0.15);
  --border-red: rgba(229, 57, 53, 0.25);

  /* Texte hiérarchie */
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.70);
  --text-tertiary: rgba(255, 255, 255, 0.50);
  --text-disabled: rgba(255, 255, 255, 0.30);

  /* Ombres premium */
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.12), 0 1px 4px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.16), 0 2px 8px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.24), 0 4px 16px rgba(0, 0, 0, 0.16);
  --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.32), 0 8px 24px rgba(0, 0, 0, 0.20);
  --shadow-red: 0 8px 24px rgba(229, 57, 53, 0.20), 0 4px 12px rgba(229, 57, 53, 0.12);

  /* Espacement harmonique (échelle golden ratio 1.618) */
  --space-xs: 0.25rem;    /* 4px */
  --space-sm: 0.5rem;     /* 8px */
  --space-md: 0.75rem;    /* 12px */
  --space-lg: 1rem;       /* 16px */
  --space-xl: 1.5rem;     /* 24px */
  --space-2xl: 2.5rem;    /* 40px */
  --space-3xl: 4rem;      /* 64px */

  /* Border radius harmonique */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-2xl: 24px;
  --radius-full: 9999px;

  /* Transitions premium */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-bounce: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ====== TYPOGRAPHIE PREMIUM HARMONIQUE ====== */

/* Échelle typographique modulaire (ratio 1.25 - Major Third) */
.text-display-2xl {
  font-size: clamp(2.5rem, 5vw, 3.5rem);
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.02em;
  color: var(--text-primary);
}

.text-display-xl {
  font-size: clamp(2rem, 4vw, 2.8rem);
  font-weight: 700;
  line-height: 1.15;
  letter-spacing: -0.015em;
  color: var(--text-primary);
}

.text-display-lg {
  font-size: clamp(1.75rem, 3.5vw, 2.25rem);
  font-weight: 600;
  line-height: 1.2;
  letter-spacing: -0.01em;
  color: var(--text-primary);
}

.text-heading-xl {
  font-size: clamp(1.5rem, 3vw, 1.875rem);
  font-weight: 600;
  line-height: 1.3;
  letter-spacing: -0.01em;
  color: var(--text-primary);
}

.text-heading-lg {
  font-size: clamp(1.25rem, 2.5vw, 1.5rem);
  font-weight: 600;
  line-height: 1.35;
  letter-spacing: -0.005em;
  color: var(--text-primary);
}

.text-heading-md {
  font-size: clamp(1.125rem, 2vw, 1.25rem);
  font-weight: 600;
  line-height: 1.4;
  color: var(--text-primary);
}

.text-body-lg {
  font-size: clamp(1rem, 1.8vw, 1.125rem);
  font-weight: 400;
  line-height: 1.6;
  color: var(--text-secondary);
}

.text-body-md {
  font-size: clamp(0.9375rem, 1.6vw, 1rem);
  font-weight: 400;
  line-height: 1.6;
  color: var(--text-secondary);
}

.text-body-sm {
  font-size: clamp(0.875rem, 1.4vw, 0.9375rem);
  font-weight: 400;
  line-height: 1.5;
  color: var(--text-tertiary);
}

.text-label-lg {
  font-size: clamp(0.875rem, 1.4vw, 0.9375rem);
  font-weight: 500;
  line-height: 1.4;
  letter-spacing: 0.01em;
  text-transform: uppercase;
  color: var(--text-tertiary);
}

.text-label-md {
  font-size: clamp(0.8125rem, 1.3vw, 0.875rem);
  font-weight: 500;
  line-height: 1.4;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: var(--text-tertiary);
}

/* Nombres tabulaires pour montants */
.tabular-nums {
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum";
  letter-spacing: -0.01em;
}

/* Amélioration de l'affichage des montants avec espaces insécables */
.currency-amount {
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
}

/* Alignement parfait des montants dans les cartes budget */
.budget-amount-container {
  display: flex;
  align-items: center;
  justify-content: center;
  font-variant-numeric: tabular-nums;
  letter-spacing: -0.02em;
}

.budget-amount-sign {
  width: 1rem;
  text-align: center;
  flex-shrink: 0;
}

.budget-amount-value {
  margin: 0 0.25rem;
  min-width: 0;
}

.budget-amount-currency {
  margin-left: 0.25rem;
  flex-shrink: 0;
  font-size: 0.875em;
}

/* ====== SAFE AREA MOBILE ====== */

/* Padding sécurisé pour éviter la barre de statut sur mobile */
.pt-safe {
  padding-top: max(1.5rem, env(safe-area-inset-top, 0px) + 1rem);
}

.pb-safe {
  padding-bottom: max(1rem, env(safe-area-inset-bottom, 0px));
}

/* ====== OPTIMISATIONS GRAPHIQUES RECHARTS ====== */

/* Supprimer l'outline bleu sur mobile lors du tap sur les graphiques */
@media (max-width: 768px) {
  .recharts-wrapper,
  .recharts-surface,
  .recharts-layer,
  .recharts-bar,
  .recharts-line,
  .recharts-pie,
  .recharts-sector {
    -webkit-tap-highlight-color: transparent !important;
    outline: none !important;
  }

  /* Désactiver le focus/active state sur les éléments SVG */
  svg:focus,
  svg:active {
    outline: none !important;
  }
}

/* ====== ANIMATIONS MODERNES POUR PWA ====== */

/* Animation gradient pour le titre OPTIMA */
@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Animation de pulsation douce pour les éléments importants */
@keyframes softPulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.02); }
}

/* Animation de flottement pour les cardes */
@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  33% { transform: translateY(-4px) rotate(0.5deg); }
  66% { transform: translateY(-2px) rotate(-0.5deg); }
}

/* Animation de shimmer pour les boutons */
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Animation de glow subtil pour cartes premium */
@keyframes subtleGlow {
  0%, 100% {
    box-shadow:
      0 8px 32px -8px rgba(0, 0, 0, 0.3),
      0 0 0 1px rgba(255, 255, 255, 0.03) inset;
  }
  50% {
    box-shadow:
      0 8px 32px -8px rgba(0, 0, 0, 0.3),
      0 0 0 1px rgba(229, 57, 53, 0.08) inset,
      0 0 16px rgba(229, 57, 53, 0.03);
  }
}

/* Animation de fade-in élégante */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Animation de scale doux */
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Animation de compteur pour les chiffres */
@keyframes counterUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Animation de slide élégant */
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Pulse rouge subtil pour highlights */
@keyframes pulseRed {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(229, 57, 53, 0.4);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(229, 57, 53, 0);
  }
}

/* Glow progressif pour focus states */
@keyframes glowIn {
  from {
    box-shadow: var(--shadow-md);
  }
  to {
    box-shadow: var(--shadow-lg), var(--shadow-red);
  }
}

/* ====== SYSTÈME DE DESIGN PREMIUM ====== */

/* Glassmorphism moderne avec profondeur */
.glass-effect {
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.12);
}

.glass-dark {
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  background: linear-gradient(135deg,
    rgba(26, 26, 30, 0.95) 0%,
    rgba(17, 17, 20, 0.97) 100%
  );
  border: 1px solid rgba(255, 255, 255, 0.08);
}

/* Ombres premium multi-couches */
.neo-shadow {
  box-shadow:
    0 2px 8px -2px rgba(0, 0, 0, 0.15),
    0 6px 20px -3px rgba(0, 0, 0, 0.12),
    0 1px 3px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

/* Ombre rouge signature pour éléments importants */
.shadow-red-premium {
  box-shadow:
    0 4px 20px rgba(229, 57, 53, 0.15),
    0 2px 8px rgba(229, 57, 53, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

/* Dégradé rouge signature élégant */
.gradient-red-elegant {
  background: linear-gradient(135deg,
    rgba(229, 57, 53, 0.12) 0%,
    rgba(198, 40, 40, 0.08) 50%,
    rgba(183, 28, 28, 0.06) 100%
  );
}

/* ====== SYSTÈME DE CARTES PREMIUM MULTI-NIVEAUX ====== */

/* Carte niveau 1 - Surface de base */
.card-premium-level-1 {
  position: relative;
  background: linear-gradient(145deg,
    var(--glass-surface-1) 0%,
    var(--glass-surface-2) 100%
  );
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  transition: all var(--transition-slow);
  overflow: hidden;
}

.card-premium-level-1::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(90deg,
    transparent,
    var(--border-strong),
    transparent
  );
  opacity: 0.5;
}

.card-premium-level-1:hover {
  transform: translateY(-4px) scale(1.005);
  border-color: var(--border-red);
  box-shadow: var(--shadow-lg), var(--shadow-red);
}

/* Carte niveau 2 - Surface élevée (hover states) */
.card-premium-level-2 {
  position: relative;
  background: linear-gradient(145deg,
    var(--glass-surface-2) 0%,
    var(--glass-surface-3) 100%
  );
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-2xl);
  box-shadow: var(--shadow-lg);
  backdrop-filter: blur(32px) saturate(180%);
  -webkit-backdrop-filter: blur(32px) saturate(180%);
  transition: all var(--transition-slow);
  overflow: hidden;
}

.card-premium-level-2::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle,
    rgba(229, 57, 53, 0.03) 0%,
    transparent 70%
  );
  opacity: 0;
  transition: opacity var(--transition-slow);
  pointer-events: none;
}

.card-premium-level-2:hover::after {
  opacity: 1;
}

.card-premium-level-2:hover {
  transform: translateY(-6px) scale(1.008);
  border-color: var(--border-red);
  box-shadow: var(--shadow-xl), var(--shadow-red);
}

/* Carte legacy - maintien compatibilité */
.card-premium-enhanced {
  @extend .card-premium-level-1;
}

/* Bouton premium avec shimmer effect */
.btn-premium-shimmer {
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg,
    #E53935 0%,
    #C62828 50%,
    #B71C1C 100%
  );
  box-shadow:
    0 4px 16px rgba(229, 57, 53, 0.3),
    0 2px 8px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-premium-shimmer::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  transition: left 0.5s;
}

.btn-premium-shimmer:hover::before {
  left: 100%;
}

.btn-premium-shimmer:hover {
  transform: translateY(-1px) scale(1.01);
  box-shadow:
    0 6px 24px rgba(229, 57, 53, 0.4),
    0 3px 12px rgba(0, 0, 0, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* ====== CLASSES UTILITAIRES PREMIUM ====== */

/* Transitions */
.smooth-transition {
  transition: all var(--transition-base);
}

.smooth-transition-fast {
  transition: all var(--transition-fast);
}

.smooth-transition-slow {
  transition: all var(--transition-slow);
}

/* Animations sur montants */
.animate-counter {
  animation: counterUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.animate-slide-in {
  animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-fade-in-up {
  animation: fadeInUp 0.4s cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
}

.animate-scale-in {
  animation: scaleIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.animate-glow-in {
  animation: glowIn 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* Hover effects premium */
.hover-lift {
  transition: all var(--transition-base);
}

.hover-lift:hover {
  transform: translateY(-2px);
}

.hover-lift-lg {
  transition: all var(--transition-slow);
}

.hover-lift-lg:hover {
  transform: translateY(-6px) scale(1.01);
}

.hover-glow {
  transition: all var(--transition-base);
}

.hover-glow:hover {
  box-shadow: var(--shadow-lg), var(--shadow-red);
}

/* Surfaces avec depth */
.surface-elevated {
  background: var(--glass-surface-2);
  border: 1px solid var(--border-medium);
  box-shadow: var(--shadow-lg);
}

.surface-floating {
  background: var(--glass-surface-3);
  border: 1px solid var(--border-strong);
  box-shadow: var(--shadow-xl);
}

/* Focus states améliorés */
.focus-ring-red {
  outline: none;
  box-shadow: 0 0 0 3px rgba(229, 57, 53, 0.15);
  border-color: var(--optima-red-primary);
}

/* Dividers premium */
.divider-subtle {
  height: 1px;
  background: linear-gradient(90deg,
    transparent,
    var(--border-subtle),
    transparent
  );
}

.divider-strong {
  height: 1px;
  background: linear-gradient(90deg,
    transparent,
    var(--border-strong),
    transparent
  );
}

/* Optimisations performances pour iOS/iPhone */
.performance-optimized {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Touch targets optimisés iPhone (44px minimum) */
.touch-target {
  min-height: 44px;
  min-width: 44px;
}

/* Optimisations PWA iPhone spécifiques */
.iphone-optimized {
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
  touch-action: manipulation;
}

/* Amélioration du scroll pour iPhone */
.smooth-scroll {
  -webkit-overflow-scrolling: touch;
  overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Fixes pour les safe areas iPhone */
@supports (padding: max(0px)) {
  .safe-area-inset {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
}

/* ====== SYSTÈME RESPONSIVE MOBILE-FIRST ====== */

/* Typography responsive avec clamp() pour fluidité */
.text-responsive-xs { font-size: clamp(0.75rem, 2vw, 0.875rem); }
.text-responsive-sm { font-size: clamp(0.875rem, 2.5vw, 1rem); }
.text-responsive-base { font-size: clamp(1rem, 3vw, 1.125rem); }
.text-responsive-lg { font-size: clamp(1.125rem, 3.5vw, 1.25rem); }
.text-responsive-xl { font-size: clamp(1.25rem, 4vw, 1.5rem); }
.text-responsive-2xl { font-size: clamp(1.5rem, 5vw, 2rem); }
.text-responsive-3xl { font-size: clamp(1.875rem, 6vw, 2.5rem); }
.text-responsive-4xl { font-size: clamp(2.25rem, 7vw, 3rem); }
.text-responsive-5xl { font-size: clamp(2.5rem, 8vw, 4rem); }

/* Titre principal responsive */
.title-main {
  font-size: clamp(2rem, 8vw, 4.5rem);
  line-height: clamp(2.2rem, 8.5vw, 4.8rem);
}

/* Logo responsive */
.logo-responsive {
  width: clamp(6rem, 20vw, 12rem);
  height: clamp(6rem, 20vw, 12rem);
}

/* Espacements responsive */
.spacing-responsive-xs { margin: clamp(0.25rem, 1vw, 0.5rem); }
.spacing-responsive-sm { margin: clamp(0.5rem, 2vw, 1rem); }
.spacing-responsive-md { margin: clamp(1rem, 3vw, 1.5rem); }
.spacing-responsive-lg { margin: clamp(1.5rem, 4vw, 2rem); }
.spacing-responsive-xl { margin: clamp(2rem, 5vw, 3rem); }

/* Padding responsive */
.p-responsive-sm { padding: clamp(0.5rem, 2vw, 1rem); }
.p-responsive-md { padding: clamp(1rem, 3vw, 1.5rem); }
.p-responsive-lg { padding: clamp(1.5rem, 4vw, 2rem); }

/* Boutons responsive avec touch targets optimaux */
.btn-responsive {
  padding: clamp(0.75rem, 3vw, 1rem) clamp(1.5rem, 4vw, 2rem);
  font-size: clamp(0.875rem, 2.5vw, 1rem);
  min-height: clamp(2.75rem, 8vw, 3.5rem);
}

/* Cartes responsive */
.card-responsive {
  padding: clamp(1rem, 4vw, 1.5rem);
  margin-bottom: clamp(0.75rem, 3vw, 1rem);
  border-radius: clamp(1rem, 2.5vw, 1.5rem);
}

/* Navigation mobile native */
.nav-mobile {
  padding: clamp(0.75rem, 3vw, 1rem);
  font-size: clamp(0.875rem, 2.5vw, 1rem);
}

/* Container responsive */
.container-responsive {
  padding-left: clamp(1rem, 4vw, 1.5rem);
  padding-right: clamp(1rem, 4vw, 1.5rem);
}

/* Icônes responsive */
.icon-responsive-sm { width: clamp(1rem, 3vw, 1.25rem); height: clamp(1rem, 3vw, 1.25rem); }
.icon-responsive-md { width: clamp(1.25rem, 4vw, 1.5rem); height: clamp(1.25rem, 4vw, 1.5rem); }
.icon-responsive-lg { width: clamp(1.5rem, 5vw, 2rem); height: clamp(1.5rem, 5vw, 2rem); }

/* Mobile-specific optimizations */
@media (max-width: 768px) {
  .mobile-text-tight { line-height: 1.3; }
  .mobile-compact {
    padding-top: clamp(0.5rem, 2vw, 1rem);
    padding-bottom: clamp(0.5rem, 2vw, 1rem);
  }
  .mobile-spacing { gap: clamp(0.5rem, 2vw, 1rem); }
}

/* ====== OPTIMISATIONS AVANCÉES ULTRA-FLUIDES ====== */

/* Breakpoints personnalisés pour expérience optimale */
@media (max-width: 480px) {
  /* Très petits mobiles - optimisation extrême */
  .title-main { font-size: clamp(1.5rem, 6vw, 2.5rem); }
  .card-responsive { padding: clamp(0.75rem, 3vw, 1rem); }
  .btn-responsive { min-height: clamp(2.5rem, 7vw, 3rem); }
}

@media (min-width: 481px) and (max-width: 768px) {
  /* Mobiles moyens/grands - équilibre parfait */
  .title-main { font-size: clamp(2rem, 7vw, 3.5rem); }
}

@media (min-width: 769px) and (max-width: 1024px) {
  /* Tablettes - transition douce vers desktop */
  .container-responsive { padding-left: 2rem; padding-right: 2rem; }
  .text-responsive-xl { font-size: clamp(1.5rem, 3vw, 1.75rem); }
}

@media (min-width: 1025px) {
  /* Desktop - expérience premium */
  .card-responsive { padding: 2rem; border-radius: 1.5rem; }
  .btn-responsive { padding: 1rem 2.5rem; font-size: 1.125rem; }
}

/* Optimisations performance extrême */
.ultra-smooth {
  transform: translateZ(0);
  will-change: transform, opacity;
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

/* Micro-interactions avancées */
.hover-lift {
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.hover-lift:hover {
  transform: translateY(-2px) scale(1.02);
}

/* Optimisation lisibilité mobile */
@media (max-width: 768px) {
  .mobile-readability {
    font-weight: 500;
    letter-spacing: 0.015em;
    line-height: 1.4;
  }
}

/* Gestion orientation mobile */
@media (max-width: 768px) and (orientation: landscape) {
  .landscape-compact {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .title-main { font-size: clamp(1.25rem, 5vw, 2rem); }
}

/* ====== CORRECTIONS PROBLÈMES SPÉCIFIQUES PWA ====== */

/* Fix débordements étoiles section Médias */
.media-stars-container {
  overflow: hidden;
  word-break: break-all;
  max-width: 100%;
}

.star-rating {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  max-width: 100%;
  overflow: hidden;
}

/* Amélioration des z-index pour éviter superpositions */
.dropdown-menu {
  z-index: 9999;
  position: fixed;
}

.priority-menu {
  z-index: 10000;
}

.suggestions-dropdown {
  z-index: 9998;
}

/* Navigation PWA ultra-fluide */
.pwa-navigation {
  transform: translateZ(0);
  will-change: transform;
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Optimisation touch iOS */
.ios-touch-optimized {
  -webkit-tap-highlight-color: transparent;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  touch-action: manipulation;
}

/* Corrections alignement Budget/Médias mobile */
@media (max-width: 768px) {
  .section-alignment-fix {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    width: 100%;
  }

  .mobile-center-fix {
    margin-left: auto;
    margin-right: auto;
    max-width: 100%;
  }

  .overflow-fix {
    overflow-x: hidden;
    max-width: 100vw;
  }
}

/* Navigation bottom bar responsive améliorée */
.bottom-nav-optimized {
  padding: clamp(0.5rem, 2vw, 1rem);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.bottom-nav-icon {
  width: clamp(1.25rem, 4vw, 1.5rem);
  height: clamp(1.25rem, 4vw, 1.5rem);
  transition: all 0.2s ease;
}

.bottom-nav-text {
  font-size: clamp(0.75rem, 2.5vw, 0.875rem);
  font-weight: 500;
}

/* Amélioration cohérence couleurs */
.btn-primary-red {
  background: linear-gradient(135deg, #dc2626, #b91c1c);
  color: white;
  border: none;
  transition: all 0.2s ease;
}

.btn-primary-red:hover {
  background: linear-gradient(135deg, #b91c1c, #991b1b);
  transform: translateY(-1px);
}

/* Fix pour les éléments qui débordent */
.container-safe {
  max-width: 100vw;
  overflow-x: hidden;
  padding-left: clamp(0.75rem, 3vw, 1.5rem);
  padding-right: clamp(0.75rem, 3vw, 1.5rem);
}

/* Optimisation performance PWA */
.pwa-optimized {
  contain: layout style paint;
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* Amélioration transitions pages PWA */
.page-transition {
  transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  transform: translateZ(0);
}

.page-enter {
  opacity: 0;
  transform: translateX(20px);
}

.page-enter-active {
  opacity: 1;
  transform: translateX(0);
}

.page-exit {
  opacity: 1;
  transform: translateX(0);
}

.page-exit-active {
  opacity: 0;
  transform: translateX(-20px);
}

/* Fixes scroll inertiel iOS */
.scroll-smooth-ios {
  -webkit-overflow-scrolling: touch;
  overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Protection contre reflow/repaint */
.layout-stable {
  contain: layout;
  content-visibility: auto;
}

/* ====== OPTIMISATION HAUTEUR MOBILE COMPACTE ====== */

/* Viewport mobile optimisé pour éviter scroll inutile */
.mobile-viewport-optimized {
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height */
  display: flex;
  flex-direction: column;
}

.mobile-main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  max-height: calc(100vh - 80px); /* Navigation bottom height */
  max-height: calc(100dvh - 80px);
  overflow: hidden;
}

/* Formulaires compacts mobiles */
.mobile-form-compact {
  padding: clamp(0.75rem, 2vw, 1rem);
  margin-bottom: clamp(0.5rem, 1.5vw, 0.75rem);
  border-radius: clamp(0.5rem, 1.5vw, 0.75rem);
}

.mobile-form-row {
  display: flex;
  flex-direction: column;
  gap: clamp(0.5rem, 1.5vw, 0.75rem);
  margin-bottom: clamp(0.5rem, 1.5vw, 0.75rem);
}

/* Hauteurs inputs mobiles compactes */
.mobile-input-compact {
  height: clamp(2.5rem, 6vw, 3rem);
  font-size: clamp(0.875rem, 2.5vw, 1rem);
  padding: clamp(0.5rem, 1.5vw, 0.75rem);
  border-radius: clamp(0.5rem, 1.5vw, 0.75rem);
}

.mobile-button-compact {
  height: clamp(2.5rem, 6vw, 3rem);
  padding: 0 clamp(1rem, 3vw, 1.5rem);
  font-size: clamp(0.875rem, 2.5vw, 1rem);
  font-weight: 600;
  border-radius: clamp(0.5rem, 1.5vw, 0.75rem);
}

/* Listes scrollables indépendantes */
.mobile-scrollable-list {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
  max-height: calc(100vh - 300px); /* Réserve espace pour formulaires */
  max-height: calc(100dvh - 300px);
}

.mobile-scrollable-list::-webkit-scrollbar {
  display: none; /* Chrome/Safari */
}

/* Container sections mobiles optimisées */
.mobile-section {
  display: flex;
  flex-direction: column;
  height: 100%;
  max-height: calc(100vh - 120px);
  max-height: calc(100dvh - 120px);
}

.mobile-section-header {
  flex-shrink: 0;
  padding: clamp(0.75rem, 2vw, 1rem);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(10px);
}

.mobile-section-content {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Grids compactes mobiles */
.mobile-grid-compact {
  display: grid;
  gap: clamp(0.5rem, 1.5vw, 0.75rem);
  padding: clamp(0.5rem, 1.5vw, 0.75rem);
}

/* Cartes compactes mobiles */
.mobile-card-compact {
  padding: clamp(0.75rem, 2vw, 1rem);
  margin-bottom: clamp(0.5rem, 1.5vw, 0.75rem);
  border-radius: clamp(0.5rem, 1.5vw, 0.75rem);
  min-height: auto;
}

/* Espacements ultra-compacts pour mobiles */
@media (max-width: 768px) {
  .mobile-ultra-compact {
    padding: 0.5rem;
    margin: 0.25rem 0;
  }

  .mobile-spacing-minimal {
    gap: 0.5rem;
    margin: 0.25rem 0;
  }

  .mobile-text-compact {
    line-height: 1.3;
    font-size: clamp(0.8rem, 2.2vw, 0.9rem);
  }

  /* Réduction drastique des marges/paddings */
  .space-y-4 > * + * {
    margin-top: 0.75rem !important;
  }

  .space-y-6 > * + * {
    margin-top: 1rem !important;
  }

  .space-y-8 > * + * {
    margin-top: 1.25rem !important;
  }
}

/* Headers compacts mobiles */
.mobile-header-compact {
  padding: clamp(0.5rem, 1.5vw, 0.75rem);
  text-align: center;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(15px);
  border-radius: clamp(0.75rem, 2vw, 1rem);
  margin-bottom: clamp(0.75rem, 2vw, 1rem);
}

.mobile-title-compact {
  font-size: clamp(1.25rem, 4vw, 1.75rem);
  font-weight: 700;
  margin-bottom: clamp(0.25rem, 0.8vw, 0.5rem);
}

/* Optimisation landscape mobile */
@media (max-width: 768px) and (orientation: landscape) {
  .mobile-landscape-ultra-compact {
    padding: 0.25rem;
    margin: 0.125rem 0;
  }

  .mobile-form-compact {
    padding: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .mobile-scrollable-list {
    max-height: calc(100vh - 200px);
  }
}

/* Containers fluides sans débordement */
.mobile-safe-container {
  width: 100%;
  max-width: 100vw;
  padding-left: clamp(0.75rem, 2vw, 1rem);
  padding-right: clamp(0.75rem, 2vw, 1rem);
  box-sizing: border-box;
}

/* Fixes pour très petits écrans */
@media (max-width: 375px) {
  .mobile-tiny-screen {
    font-size: 0.8rem;
    padding: 0.5rem;
  }

  .mobile-button-compact {
    height: 2.25rem;
    font-size: 0.8rem;
  }

  .mobile-input-compact {
    height: 2.25rem;
    font-size: 0.8rem;
  }
}

/* ====== SUPPRESSION TOTALE CONTOUR BLEU GRAPHIQUES - ULTRA RADICAL ====== */
/* Approche maximale pour éliminer ABSOLUMENT tout contour/focus/border */

/* Global - Tous les éléments */
*,
*::before,
*::after,
*:focus,
*:active,
*:focus-visible,
*:focus-within {
  -webkit-tap-highlight-color: transparent !important;
  -webkit-touch-callout: none !important;
  -webkit-user-select: none !important;
  user-select: none !important;
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  -webkit-focus-ring-color: transparent !important;
  -moz-outline-style: none !important;
  -moz-outline-width: 0 !important;
  -moz-outline-color: transparent !important;
}

/* Tous les SVG et éléments Recharts - Approche exhaustive */
svg,
svg *,
svg > *,
path,
rect,
circle,
ellipse,
line,
polyline,
polygon,
text,
g,
defs,
clipPath,
.recharts-wrapper,
.recharts-wrapper *,
.recharts-wrapper > *,
.recharts-responsive-container,
.recharts-responsive-container *,
.recharts-surface,
.recharts-surface *,
.recharts-surface > *,
.recharts-layer,
.recharts-layer *,
.recharts-bar,
.recharts-bar *,
.recharts-bars,
.recharts-bars *,
.recharts-bar-rectangle,
.recharts-bar-rectangle *,
.recharts-rectangle,
.recharts-rectangle *,
.recharts-sector,
.recharts-sector *,
.recharts-pie,
.recharts-pie *,
.recharts-pie-sector,
.recharts-pie-sector *,
.recharts-legend-wrapper,
.recharts-legend-wrapper *,
.recharts-cartesian-grid,
.recharts-cartesian-grid *,
.recharts-xAxis,
.recharts-yAxis,
.recharts-xAxis *,
.recharts-yAxis *,
.card-premium-level-1,
.card-premium-level-1 *:not(select),
.card-premium-level-1 > *:not(select),
.card-premium-level-2,
.card-premium-level-2 *:not(select),
.card-premium-level-2 > *:not(select) {
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  border: none !important;
  box-shadow: none !important;
  -webkit-tap-highlight-color: transparent !important;
  -webkit-focus-ring-color: transparent !important;
  -moz-outline-style: none !important;
  -moz-outline-width: 0 !important;
  -moz-outline-color: transparent !important;
  -webkit-touch-callout: none !important;
}

/* Tous les états possibles - focus, active, hover, visited */
svg:focus,
svg:active,
svg:hover,
svg *:focus,
svg *:active,
svg *:hover,
path:focus,
path:active,
rect:focus,
rect:active,
.recharts-wrapper:focus,
.recharts-wrapper:active,
.recharts-wrapper:hover,
.recharts-wrapper *:focus,
.recharts-wrapper *:active,
.recharts-wrapper *:hover,
.recharts-surface:focus,
.recharts-surface:active,
.recharts-surface:hover,
.recharts-surface *:focus,
.recharts-surface *:active,
.recharts-surface *:hover,
.recharts-layer:focus,
.recharts-layer:active,
.recharts-bar:focus,
.recharts-bar:active,
.recharts-bar-rectangle:focus,
.recharts-bar-rectangle:active,
.recharts-rectangle:focus,
.recharts-rectangle:active,
.recharts-sector:focus,
.recharts-sector:active,
.recharts-pie:focus,
.recharts-pie:active,
.card-premium-level-1:focus,
.card-premium-level-1:active,
.card-premium-level-1:hover,
.card-premium-level-1 *:not(select):focus,
.card-premium-level-1 *:not(select):active,
.card-premium-level-1 *:not(select):hover,
.card-premium-level-2:focus,
.card-premium-level-2:active,
.card-premium-level-2:hover,
.card-premium-level-2 *:not(select):focus,
.card-premium-level-2 *:not(select):active,
.card-premium-level-2 *:not(select):hover {
  outline: none !important;
  outline-width: 0 !important;
  outline-style: none !important;
  outline-color: transparent !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
  border: none !important;
  -webkit-tap-highlight-color: transparent !important;
  -webkit-focus-ring-color: transparent !important;
}

/* Exception pour selects natifs - doit conserver son comportement */
@media (max-width: 768px) {
  select {
    pointer-events: auto !important;
    touch-action: manipulation !important;
    -webkit-user-select: none !important;
    user-select: none !important;
    position: relative !important;
    z-index: 100 !important;
  }
}

/* Spécifique mobile - Suppression du focus-visible */
@media (max-width: 768px) {
  *:not(select):focus-visible,
  *:not(select):focus,
  svg:focus-visible,
  svg *:focus-visible,
  .recharts-wrapper:focus-visible,
  .recharts-wrapper *:not(select):focus-visible,
  .recharts-surface:focus-visible,
  .recharts-surface *:not(select):focus-visible {
    outline: none !important;
    outline-width: 0 !important;
    outline-style: none !important;
    outline-color: transparent !important;
    outline-offset: 0 !important;
    box-shadow: none !important;
    border: none !important;
    -webkit-tap-highlight-color: transparent !important;
  }
}

/* ====== OPTIMISATION PERFORMANCE GRAPHIQUES MOBILE ====== */
/* Désactive animations lourdes sur mobile */
@media (max-width: 768px) {
  .recharts-bar-rectangles,
  .recharts-bar,
  .recharts-sector {
    animation: none !important;
    transition: none !important;
  }
}

/* Force rendu optimisé GPU */
.recharts-wrapper,
.recharts-surface {
  transform: translate3d(0, 0, 0);
  will-change: auto;
  -webkit-transform: translate3d(0, 0, 0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* ====== OPTIMISATION TOOLTIPS ULTRA-FLUIDES ET FERMETURE INSTANTANÉE ====== */
/* Tooltips légers, réactifs et fermeture immédiate sur click-outside */
.recharts-tooltip-wrapper {
  transition: opacity 80ms ease-out, transform 80ms ease-out, visibility 0ms linear 80ms !important;
  will-change: opacity, transform, visibility;
  pointer-events: none !important;
}

/* Fermeture instantanée quand opacity = 0 */
.recharts-tooltip-wrapper[style*="opacity: 0"],
.recharts-tooltip-wrapper[style*="visibility: hidden"] {
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
  display: none !important;
}

.recharts-default-tooltip {
  transition: all 80ms ease-out !important;
  animation: tooltipFadeIn 80ms ease-out;
}

.recharts-custom-tooltip {
  transition: opacity 80ms ease-out, transform 80ms ease-out !important;
}

/* Animation d'apparition rapide */
@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: scale(0.96) translateY(-2px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Animation de disparition instantanée */
@keyframes tooltipFadeOut {
  from {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
  to {
    opacity: 0;
    transform: scale(0.98) translateY(-1px);
    visibility: hidden;
  }
}

/* Supprime tout délai pour réactivité instantanée */
.recharts-tooltip-wrapper *,
.recharts-default-tooltip *,
.recharts-custom-tooltip * {
  transition-delay: 0ms !important;
  animation-delay: 0ms !important;
}

/* Accélération hardware GPU */
.recharts-tooltip-wrapper,
.recharts-default-tooltip,
.recharts-custom-tooltip {
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  perspective: 1000px;
  -webkit-perspective: 1000px;
}

/* Mobile : transitions encore plus rapides */
@media (max-width: 768px) {
  .recharts-tooltip-wrapper {
    transition: opacity 60ms ease-out, transform 60ms ease-out, visibility 0ms linear 60ms !important;
  }

  .recharts-default-tooltip,
  .recharts-custom-tooltip {
    transition: all 60ms ease-out !important;
  }

  @keyframes tooltipFadeIn {
    from {
      opacity: 0;
      transform: scale(0.97) translateY(-1px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }
}

/* ========================================
   NOUVELLE NAVIGATION MOBILE - UX OPTIMISÉE
   ======================================== */

/* Effet glow pour le bouton d'actions flottant */
@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 10px 30px rgba(239, 68, 68, 0.4);
  }
  50% {
    box-shadow: 0 10px 40px rgba(239, 68, 68, 0.5);
  }
}

/* Animation smooth pour le backdrop du menu */
@supports (backdrop-filter: blur(12px)) {
  .floating-menu-backdrop {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
}

/* Optimisations GPU pour animations fluides */
.floating-action-button,
.floating-menu-container,
.menu-backdrop,
.mobile-nav-button {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  -webkit-transform: translateZ(0);
  -webkit-font-smoothing: antialiased;
}

/* Optimisation hardware acceleration pour Framer Motion */
.floating-menu-container * {
  transform: translateZ(0);
}

/* Touch feedback premium pour actions rapides */
@media (max-width: 768px) {
  .floating-action-button:active {
    transform: scale(0.92) translateZ(0);
    transition: transform 150ms cubic-bezier(0.22, 1, 0.36, 1);
  }

  .mobile-nav-button:active {
    transform: scale(0.94) translateZ(0);
    transition: transform 120ms cubic-bezier(0.22, 1, 0.36, 1);
  }
}

/* Safe area pour notch iPhone */
@supports (padding: env(safe-area-inset-bottom)) {
  .mobile-nav-safe {
    padding-bottom: calc(0.5rem + env(safe-area-inset-bottom));
  }
}

/* Scrollbar personnalisée pour le menu de navigation */
.floating-menu-scroll {
  scrollbar-width: thin;
  scrollbar-color: rgba(239, 68, 68, 0.3) transparent;
}

.floating-menu-scroll::-webkit-scrollbar {
  width: 4px;
}

.floating-menu-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.floating-menu-scroll::-webkit-scrollbar-thumb {
  background: rgba(239, 68, 68, 0.3);
  border-radius: 2px;
}

.floating-menu-scroll::-webkit-scrollbar-thumb:hover {
  background: rgba(239, 68, 68, 0.5);
}

/* Bloquer ABSOLUMENT le scroll quand menu ouvert */
body.menu-open {
  position: fixed !important;
  overflow: hidden !important;
  width: 100% !important;
  height: 100% !important;
  left: 0 !important;
  right: 0 !important;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: none !important;
  touch-action: none !important;
}

#root.menu-open {
  position: fixed !important;
  overflow: hidden !important;
  width: 100% !important;
  height: 100% !important;
  left: 0 !important;
  right: 0 !important;
  overscroll-behavior: none !important;
  touch-action: none !important;
}

/* S'assurer que tous les enfants du root sont aussi figés */
body.menu-open > * {
  overflow: hidden !important;
}

#root.menu-open > * {
  overflow: hidden !important;
}

/* Bloquer le scroll du body sur mobile pour isoler le scroll du contenu */
@media (max-width: 768px) {
  body {
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
  }

  #root {
    overflow: hidden;
    height: 100vh;
  }
}

/* Optimisations de rendu mobile */
@media (max-width: 768px) {
  /* Réduire le coût des backdrop-blur sur mobile */
  .backdrop-blur-xl {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }

  .backdrop-blur-2xl {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Optimiser le rendu des cartes */
  .floating-menu-container {
    contain: layout style paint;
    content-visibility: auto;
  }

  /* Scrollbar personnalisé pour les listes de tâches */
  *::-webkit-scrollbar {
    width: 6px;
  }

  *::-webkit-scrollbar-track {
    background: transparent;
  }

  *::-webkit-scrollbar-thumb {
    background: rgba(239, 68, 68, 0.3);
    border-radius: 3px;
  }

  *::-webkit-scrollbar-thumb:hover {
    background: rgba(239, 68, 68, 0.5);
  }

  /* Optimiser le scroll touch sur mobile */
  .task-scroll-container {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: contain;
    scroll-behavior: smooth;
  }

  /* Conteneur principal avec scroll isolé sur mobile */
  .mobile-scroll-container {
    position: fixed;
    top: 88px; /* Hauteur du header OPTIMA */
    left: 0;
    right: 0;
    bottom: 64px; /* Hauteur de la bottom nav */
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    touch-action: pan-y;
    overscroll-behavior-y: contain;
    padding-bottom: 100px; /* Espace pour voir le footer correctement */
  }

  /* Scrollbar personnalisée pour le conteneur principal */
  .mobile-scroll-container::-webkit-scrollbar {
    width: 4px;
  }

  .mobile-scroll-container::-webkit-scrollbar-track {
    background: transparent;
  }

  .mobile-scroll-container::-webkit-scrollbar-thumb {
    background: rgba(239, 68, 68, 0.25);
    border-radius: 2px;
  }
}
